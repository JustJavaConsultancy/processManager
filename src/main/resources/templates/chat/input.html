<form id="chat-form" class="p-4 border-t flex flex-col items-stretch space-y-2">
    <!-- Recipients dropdown (positioned above input) -->
    <div class="relative">
        <div id="recipients-dropdown" class="absolute bottom-full mb-2 right-0 w-64 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg z-10 hidden">
            <div class="p-3">
                <h4 class="text-sm font-semibold text-slate-900 dark:text-white mb-2">Send to multiple recipients</h4>
                <div class="space-y-2 max-h-48 overflow-y-auto">
                    <!-- Users will be populated dynamically by JavaScript -->
                    <div class="text-xs text-slate-500 dark:text-slate-400 font-medium">Users</div>
                    <!-- Dynamic user list populated by chat.js -->
                    
                    <!-- Groups section (if needed) -->
                    <div class="text-xs text-slate-500 dark:text-slate-400 font-medium mt-3 pt-2 border-t border-slate-200 dark:border-slate-600">Groups</div>
                    <!-- Dynamic group list (can be added later) -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Recipients display area (hidden by default) -->
    <div id="recipients-display" class="hidden bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm">
        <span class="text-slate-600 dark:text-slate-300">To: </span>
        <div id="selected-recipients" class="inline-flex flex-wrap gap-1"></div>
        <button type="button" id="clear-recipients" class="ml-2 text-red-500 hover:text-red-700 text-xs">Clear</button>
    </div>
    
    <!-- Message input area -->
    <div class="flex items-center space-x-2">
        <div class="relative flex-1">
            <input id="user-chat-input" type="text" class="w-full rounded-full px-4 py-2 pr-12 border focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Type a message..." autocomplete="off" />
            <!-- Multi-recipient dropdown button inside input -->
            <div class="absolute right-2 top-1/2 transform -translate-y-1/2">
                <button type="button" id="recipients-dropdown-btn" class="text-slate-400 hover:text-blue-600 dark:text-slate-300 dark:hover:text-blue-400 focus:outline-none transition-colors p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700" title="Add recipients">
                    <span class="material-icons text-sm">group_add</span>
                </button>
            </div>
        </div>
        
        <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white rounded-full p-2 shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <span class="material-icons">send</span>
        </button>
    </div>
</form> 