<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <title>Invoice Review</title>
    <style>
        .search-bar {
            background-color: #374151;
        }
        .btn-primary {
            background-color: #3B82F6;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #2563EB;
            transform: translateY(-1px);
            box-shadow: 0 4px 6px rgba(59, 130, 246, 0.3);
        }
        .card {
            background-color: #1F2937;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
        }
        .status-paid {
            background-color: #10B981;
            color: #FFFFFF;
        }
        .status-pending {
            background-color: #F59E0B;
            color: #FFFFFF;
        }
        .status-overdue {
            background-color: #EF4444;
            color: #FFFFFF;
        }
        .invoice-progress {
            height: 4px;
            background-color: #374151;
            border-radius: 2px;
            overflow: hidden;
        }
        .progress-paid {
            background-color: #10B981;
            width: 100%;
        }
        .progress-pending {
            background-color: #F59E0B;
            width: 50%;
        }
        .progress-overdue {
            background-color: #EF4444;
            width: 0%;
        }
        .review-td {
            padding-top:10px;
            padding-bottom: 10px;
            text-align:center;
        }
        .review-th {
            padding-bottom: 3px;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .glow {
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }
        .card-paid {
            border-left-color: #10B981;
        }
        .card-pending {
            border-left-color: #F59E0B;
        }
        .card-overdue {
            border-left-color: #EF4444;
        }
        .pagination-btn {
            transition: all 0.2s ease;
        }
        .pagination-btn:hover {
            background-color: #374151;
            transform: scale(1.1);
        }
        .copy-btn {
            transition: all 0.2s ease;
        }
        .copy-btn:hover {
            transform: translateX(3px);
        }
    </style>
</head>
<div layout:fragment="content" class="flex-1 p-4 md:p-6 overflow-y-auto">
    <main>
        <div class="flex justify-between items-center mb-8 animate__animated animate__fadeIn">
            <div>
                <h2 class="text-3xl font-bold text-white">Pending Invoices</h2>
                <p class="text-gray-400 mt-1">Manage and track invoices to review</p>
            </div>
        </div>

        <!-- Stats Overview -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="bg-gradient-to-r from-blue-900 to-blue-700 p-6 rounded-xl shadow-lg transform transition hover:scale-105">
                <div class="flex justify-between items-center">
                    <div>
                        <p class="text-sm text-blue-200">Total Pending Invoices</p>
                        <p class="text-2xl font-bold text-white"><span th:text="${allPendingCount}">24,500</span></p>
                    </div>
                    <span class="material-icons text-blue-300 text-3xl">schedule</span>
                </div>
                <div class="mt-4 h-2 bg-blue-800 rounded-full overflow-hidden">
                    <div class="h-full bg-blue-400 rounded-full" style="width: 75%"></div>
                </div>
            </div>

            <div class="bg-gradient-to-r from-green-900 to-green-700 p-6 rounded-xl shadow-lg transform transition hover:scale-105">
                <div class="flex justify-between items-center">
                    <div>
                        <p class="text-sm text-green-200">Approved Invoices</p>
                        <p class="text-2xl font-bold text-white" th:text="${allApprovedCount}" >18</p>
                    </div>
                    <span class="material-icons text-green-300 text-3xl">check_circle</span>
                </div>
                <div class="mt-4 h-2 bg-green-800 rounded-full overflow-hidden">
                    <div class="h-full bg-green-400 rounded-full" style="width: 72%"></div>
                </div>
            </div>

            <div class="bg-gradient-to-r from-yellow-900 to-yellow-700 p-6 rounded-xl shadow-lg transform transition hover:scale-105">
                <div class="flex justify-between items-center">
                    <div>
                        <p class="text-sm text-yellow-200">Declined Invoices</p>
                        <p class="text-2xl font-bold text-white" th:text="${allDeclinedCount}">7</p>
                    </div>
                    <span class="material-icons text-yellow-300 text-3xl">cancel</span>
                </div>
                <div class="mt-4 h-2 bg-yellow-800 rounded-full overflow-hidden">
                    <div class="h-full bg-yellow-400 rounded-full" style="width: 28%"></div>
                </div>
            </div>
        </div>

        <!-- Invoice List Header -->
        <div class="mb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
            <div>
                <h3 class="text-xl font-semibold text-white">Recent Invoices</h3>
                <p class="text-sm text-gray-400 mt-1">Your most recent invoice needing review</p>
            </div>
            <div class="relative w-full md:w-72">
                <span class="material-icons absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">search</span>
                <input class="bg-gray-800 w-full pl-10 pr-4 py-2 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Search invoices..." type="text"/>
            </div>
        </div>

        <!-- Invoice Cards Grid -->
        <div>
            <!-- Invoice Table - Dynamically generated from backend -->
            <table class="table-auto" style="width: 100%;">
                <thead style="border-bottom: 1px solid white;">
                    <tr>
                        <th class="review-th">Client Name</th>
                        <th class="review-th">Business Name</th>
                        <th class="review-th">Email</th>
                        <th class="review-th">Due Date</th>
                        <th class="review-th">Action</th>
                    </tr>
                </thead>
                <tbody th:each="invoice: ${allPendingInvoice}">
                    <tr>
                        <td class="review-td" th:text="${invoice.clientName}"></td>
                        <td class="review-td" th:text="${invoice.businessName}"></td>
                        <td class="review-td" th:text="${invoice.email}"></td>
                        <td class="review-td" th:text="${invoice.dueDate}"></td>
                        <td class="review-td">
                            <a style="background:#1d4ed8; padding:6px;border-radius:6px;cursor:pointer;"
                               th:href="@{/invoice/invoice-review/{id}(id=${invoice.taskId})}">Edit Details</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <div class="mt-8 flex flex-col sm:flex-row justify-between items-center gap-4 text-sm text-gray-400">
            <span>Showing <span class="font-medium text-white">1</span> to <span class="font-medium text-white">5</span> of <span class="font-medium text-white">25</span> results</span>
            <div class="flex items-center space-x-2">
                <button class="pagination-btn p-2 rounded-md hover:bg-gray-700 disabled:opacity-50" disabled>
                    <span class="material-icons">chevron_left</span>
                </button>
                <button class="pagination-btn px-3 py-1 rounded-md hover:bg-gray-700 font-medium text-white">
                    1
                </button>
                <button class="pagination-btn px-3 py-1 rounded-md hover:bg-gray-700">
                    2
                </button>
                <button class="pagination-btn px-3 py-1 rounded-md hover:bg-gray-700">
                    3
                </button>
                <button class="pagination-btn p-2 rounded-md hover:bg-gray-700">
                    <span class="material-icons">chevron_right</span>
                </button>
            </div>
        </div>
    </main>
    <script>
        const cards = document.querySelectorAll('.card');
        cards.forEach((card, index) => {
            // Add delay based on index for staggered animation
            card.style.animationDelay = `${index * 0.1}s`;
        });

        // Add glow effect to create button on hover
        const createBtn = document.querySelector('.btn-primary');
        createBtn.addEventListener('mouseenter', () => {
            createBtn.classList.add('glow');
        });
        createBtn.addEventListener('mouseleave', () => {
            createBtn.classList.remove('glow');
        });
    </script>
</div>
</html>